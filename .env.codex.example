# Example environment for preparing a Codex workspace with SSH access.
#
# Usage:
#   set -a
#   source .env.codex.example
#   set +a
#   scripts/setup-codex-workspace.sh
#
# Customize the values to match your deployment before sourcing the file.

# Bastion endpoint used by the setup script. Provide SSH_GW_NODE in the form
# host:port (for example <keen-dns-domain>:443).
SSH_GW_NODE=<keen-dns-domain>:443
# Credentials for the HTTPS tunnel (see deploy script output).
SSH_GW_USER=codex
SSH_GW_TOKEN=<paste-token-here>

# Local port used by the tunnel inside Codex.
SSH_TUNNEL_LOCAL_PORT=4022
# Legacy variables that remain supported:
# SSH_BASTION_ENDPOINT=https://<keen-dns-domain>:443
# SSH_BASTION_HOST=<node-ip>
# SSH_BASTION_PORT=<node-port>

# SSH identity that will be installed into configs/id-codex-ssh. Paste the
# entire OpenSSH private key with literal \n sequences or export SSH_KEY from
# a secure secret store before sourcing this file.
SSH_KEY="-----BEGIN OPENSSH PRIVATE KEY-----\nPASTE_PRIVATE_KEY_HERE\n-----END OPENSSH PRIVATE KEY-----"

# SSH user expected by the bastion container image.
SSH_BASTION_USER=codex

# Optional HTTP(S) proxy for outbound SSH connections from the workspace.
# SSH_PROXY_URL=https://proxy.internal.example:8443
SSH_PROXY_CONNECT_TIMEOUT=20
SSH_PROXY_IDLE_TIMEOUT=0
SSH_PROXY_READ_TIMEOUT=0

# Paths generated by the setup script (all relative to the repository root by
# default). Adjust them if you keep configs elsewhere.
SSH_CONFIG_PATH=${HOME}/.ssh/config
SSH_IDENTITY_PATH=./configs/id-codex-ssh
SSH_KNOWN_HOSTS_PATH=./configs/ssh-known_hosts
SSH_INVENTORY_PATH=./configs/ssh-hosts.json
SSH_REPORT_PATH=./reports/ssh-inventory.md

# Optional overrides for generated documentation.
SSH_GENERATED_KEY_COMMENT=codex@workspace
# SSH_HOST_LABEL_OVERRIDES="srv-01:22=production,srv-02:22=staging"
